{% extends "base.html" %}
{% block title %}Quản lý Users{% endblock %}
{% block content %}
<h1>Quản Lý Người Dùng</h1>
<p> Xin chào Admin</p>
<h3>    Danh sách người dùng</h3>
{% if users %}
    <table border="1" cellpadding="10" style="width:100%; border-collapse: collapse;">
      <thead>
        <tr>
          <th>Username</th>
          <th>Email</th>
          <th>Role hiện tại</th>
          <th>Phone</th>
          <th>Status</th>
          <th>Thao tác</th>
        </tr>
      </thead>
      <tbody>
        {% for user in users %}
          <tr>
            <td>{{ user.username or 'N/A' }}</td>
            <td>{{ user.email }}</td>
            <td>{{ user.role | capitalize }}</td>
            <td>{{ user.phone or 'N/A' }}</td>
            <td>{{ user.status }}</td>
            <td>
              <form action="{{ url_for('views.update_role') }}" method="POST" style="display:inline;">
            
                <input type="hidden" name="user_id" value="{{ user.user_id }}">
                <select name="role">
                  <option value="student" {% if user.role == 'student' %}selected{% endif %}>Student</option>
                  <option value="lecturer" {% if user.role == 'lecturer' %}selected{% endif %}>Lecturer</option>
                  <option value="hod" {% if user.role == 'hod' %}selected{% endif %}>HOD</option>
                  <option value="rector" {% if user.role == 'rector' %}selected{% endif %}>Rector</option>
                </select>
                <button type="submit">Cập nhật</button>
              </form>
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <p>Chưa có người dùng nào khác ngoài admin.</p>
  {% endif %}
  
  <br>
  <a href="{{ url_for('auth.logout') }}">Đăng xuất</a>
{% endblock %}